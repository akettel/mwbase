<alert ng-repeat="alert in alerts" type="warning" close="closeAlert($index)">
  <strong>{{alert}}</strong>
</alert>

<div class="row vertical-align participant-buttons">
  <div class=col-md-9" ng-include src="'static/app/dashboard/participant/participantButtons.html'" ng-controller="ParticipantListController" onload="filteredParticipants = filteredParticipants">
  </div>
  <div class="col-md-1" style="text-align:center">
    <h3>Count<br/>{{filteredParticipants.length}}/{{participants.length}}</h3>
  </div>

  <div class="col-md-2 col-sm-4">
    <mw-action-btn
      ui-sref='participant-new'
      mw-icon="mw-mwach-phone-add"
      mw-style="info"
      style="margin: 20px 0; width: 100%;">
      Enroll New
    </mw-action-btn>
  </div>
</div>

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th><a href ng-click="setSort('study_id')">Study ID</a>
        <span ng-if="query.sortName=='study_id'"><i class='mw' ng-class='getSortClass()'></i></span>
      </th>
      <th><a href ng-click="setSort('anc_num')">ANC number</a>
        <span ng-if="query.sortName=='anc_num'"><i class='mw' ng-class='getSortClass()'></i></span>
      </th>
      <th><a href ng-click="setSort('display_name')">Name</a>
        <span ng-if="query.sortName=='display_name'"><i class='mw' ng-class='getSortClass()'></i></span>
      </th>
      <!-- <th><a href ng-click="setSort('study_group')">Study Group</a>
        <span ng-if="query.sortName=='study_group'"><i class='mw' ng-class='getSortClass()'></i></span>
      </th> -->
      <th><a href ng-click="setSort('status')">Status</a>
        <span ng-if="query.sortName=='status'"><i class='mw' ng-class='getSortClass()'></i></span>
      </th>
      <th><a href ng-click="setSort('study_base_date')">EDD/DD</a>
        <span ng-if="query.sortName=='study_base_date'"><i class='mw' ng-class='getSortClass()'></i></span>
      </th>
      <th><a href ng-click="setSort('last_msg_client')">Last SMS</a>
        <span ng-if="query.sortName=='last_msg_client'"><i class='mw' ng-class='getSortClass()'></i></span>
      </th>
      <th><a href="" ng-click="setSort('next_visit_date',$event)">Next Visit</a>
        <span ng-if="query.sortName=='next_visit_date'"><i class='mw' ng-class='getSortClass()'></i></span>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr class="pointer" ui-sref='participant-details({study_id: participant.study_id})'
      ng-repeat="participant in participants | filter:participantFilter | orderBy:query.sortName:query.sortDirection as filteredParticipants"
    >
      <td>{{participant.study_id}}</td>
      <td>{{participant.anc_num}}</td>
      <td>{{participant.display_name}}</td>
      <!-- <td>{{participant.study_group}}</td> -->
      <td ng-if="participant.active">{{participant.status}}</td>
      <td ng-if="!participant.active">Inactive</td>
      <td>{{participant.study_base_date}}</td>
      <td>{{participant.last_msg_client}}</td>
      <td>{{participant.next_visit_date}} ({{participant.next_visit_type|capitalize}})</td>
    </tr>
</table>

<!-- <ng-include src="'static/app/dashboard/participant/participantTable.html'" ng-controller="ParticipantListController">
</ng-include> -->
